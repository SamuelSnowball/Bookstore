replicaCount: 1

image:
  repository: bookstore-auth
  pullPolicy: Never  # Use local images
  tag: "latest"

service:
  type: NodePort
  port: 9000
  targetPort: 9000
  nodePort: 30000

env:
  - name: SPRING_DATASOURCE_URL
    value: "jdbc:mysql://mysql.bookstore.svc.cluster.local:3306/mydatabase?serverTimezone=UTC"
  - name: SPRING_DATASOURCE_USERNAME
    valueFrom:
      secretKeyRef:
        name: mysql-secret
        key: username
  - name: SPRING_DATASOURCE_PASSWORD
    valueFrom:
      secretKeyRef:
        name: mysql-secret
        key: password
  - name: ENTITY_SERVICE_URL
    value: "http://entity-service-entity-service.bookstore.svc.cluster.local:9001"
  - name: ORDER_SERVICE_URL
    value: "http://order-service-order-service.bookstore.svc.cluster.local:9002"
  - name: PAYMENT_SERVICE_URL
    value: "http://payment-service-payment-service.bookstore.svc.cluster.local:9003"
  - name: CORS_ALLOWED_ORIGINS
    value: "http://localhost:30080"
  - name: JAVA_OPTS
    value: "-Xms256m -Xmx768m -XX:MaxMetaspaceSize=256m"

resources:
  limits:
    cpu: 500m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 512Mi

readinessProbe:
  httpGet:
    path: /actuator/health
    port: 9000
  initialDelaySeconds: 30
  periodSeconds: 10

livenessProbe:
  httpGet:
    path: /actuator/health
    port: 9000
  initialDelaySeconds: 60
  periodSeconds: 10
